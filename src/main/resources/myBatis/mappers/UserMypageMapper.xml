<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTO Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.btc.swimpyo.backend.mappers.mypage.user.IUserMypageDaoMapper">

    <select id="selectRezList" parameterType="map" resultType="com.btc.swimpyo.backend.dto.reservation.ReservationDto">

        select
            *
        from
            tbl_user_reservation
        where 1=1
            AND u_m_email = #{userEmail}
            AND use_yn = "Y"
            <if test="u_r_no != 0">
                AND u_r_no = #{u_r_no}
            </if>
            <if test="period != 0">
                AND u_r_reg_date >= DATE_SUB(NOW(), INTERVAL #{period} MONTH)
            </if>


    </select>


</mapper>